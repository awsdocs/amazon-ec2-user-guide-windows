# Infrastructure security in Amazon EC2<a name="infrastructure-security"></a>

As a managed service, Amazon EC2 is protected by the AWS global network security procedures that are described in the [Amazon Web Services: Overview of Security Processes](https://d0.awsstatic.com/whitepapers/Security/AWS_Security_Whitepaper.pdf) whitepaper\.

You use AWS published API calls to access Amazon EC2 through the network\. Clients must support Transport Layer Security \(TLS\) 1\.0 or later\. We recommend TLS 1\.2 or later\. Clients must also support cipher suites with perfect forward secrecy \(PFS\) such as Ephemeral Diffie\-Hellman \(DHE\) or Elliptic Curve Ephemeral Diffie\-Hellman \(ECDHE\)\. Most modern systems such as Java 7 and later support these modes\.

Additionally, requests must be signed using an access key ID and a secret access key that is associated with an IAM principal\. Or you can use the [AWS Security Token Service](https://docs.aws.amazon.com/STS/latest/APIReference/Welcome.html) \(AWS STS\) to generate temporary security credentials to sign requests\.

## Network isolation<a name="network-isolation"></a>

A virtual private cloud \(VPC\) is a virtual network in your own logically isolated area in the AWS Cloud\. Use separate VPCs to isolate infrastructure by workload or organizational entity\.

A subnet is a range of IP addresses in a VPC\. When you launch an instance, you launch it into a subnet in your VPC\. Use subnets to isolate the tiers of your application \(for example, web, application, and database\) within a single VPC\. Use private subnets for your instances if they should not be accessed directly from the internet\.

To call the Amazon EC2 API from your VPC without sending traffic over the public internet, use AWS PrivateLink\.

## Isolation on physical hosts<a name="physical-isolation"></a>

Different EC2 instances on the same physical host are isolated from each other as though they are on separate physical hosts\. The hypervisor isolates CPU and memory, and the instances are provided virtualized disks instead of access to the raw disk devices\.

When you stop or terminate an instance, the memory allocated to it is scrubbed \(set to zero\) by the hypervisor before it is allocated to a new instance, and every block of storage is reset\. This ensures that your data is not unintentionally exposed to another instance\.

Network MAC addresses are dynamically assigned to instances by the AWS network infrastructure\. IP addresses are either dynamically assigned to instances by the AWS network infrastructure, or assigned by an EC2 administrator through authenticated API requests\. The AWS network allows instances to send traffic only from the MAC and IP addresses assigned to them\. Otherwise, the traffic is dropped\.

By default, an instance cannot receive traffic that is not specifically addressed to it\. If you need to run network address translation \(NAT\), routing, or firewall services on your instance, you can disable source/destination checking for the network interface\.

## Controlling network traffic<a name="control-network-traffic"></a>

Consider the following options for controlling network traffic to your EC2 instances:
+ Restrict access to your instances using [security groups](ec2-security-groups.md)\. Configure Amazon EC2 instance security groups to permit the minimum required network traffic for the Amazon EC2instance and to allow access only from defined, expected, and approved locations\. For example, if an Amazon EC2 instance is an IIS web server, configure its security groups to permit only inbound HTTP/HTTPS, Windows management traffic, and minimal outbound connections\.
+ Leverage security groups as the primary mechanism for controlling network access to Amazon EC2 instances\. When necessary, use network ACLs sparingly to provide stateless, coarse\-grain network control\. Security groups are more versatile than network ACLs due to their ability to perform stateful packet filtering and create rules that reference other security groups\. However, network ACLs can be effective as a secondary control for denying a specific subset of traffic or providing high\-level subnet guard rails\. Also, because network ACLs apply to an entire subnet, they can be used as defense\-in\-depth in case an instance is ever launched unintentionally without a correct security group\.
+ Centrally manage Windows Firewall settings with Group Policy Objects \(GPO\) to further enhance network controls\. Customers often use the Windows Firewall for further visibility into network traffic and to complement security group filters, creating advanced rules to block specific applications from accessing the network or to filter traffic from a subset IP addresses\. For example, the Windows Firewall can limit access to the EC2 metadata service IP address to specific whitelisted users or applications\. Alternatively, a public\-facing service might use security groups to restrict traffic to specific ports and the Windows Firewall to maintain a blacklist of explicitly blocked IP addresses\.
+ When managing Windows instances, limit access to a few well\-defined centralized management servers or bastion hosts to reduce the environment’s attack surface\. Also, use secure administration protocols like RDP encapsulation over SSL/TLS\. The Remote Desktop Gateway Quick Start provides best practices for deploying remote desktop gateway, including configuring RDP to use SSL/TLS\.
+ Use Active Directory or AWS Directory Service to tightly and centrally control and monitor interactive user and group access to Windows instances, and avoid local user permissions\. Also avoid using Domain Administrators and instead create more granular, application\-specific role\-based accounts\. Just Enough Administration \(JEA\) allows changes to Windows instances to be managed without interactive or administrator access\. In addition, JEA enables organizations to lock down administrative access to the subset of Windows PowerShell commands required for instance administration\. For additional information, see the section on "Managing OS\-level Access to Amazon EC2" in the [AWS Security Best Practices](https://d1.awsstatic.com/whitepapers/Security/AWS_Security_Best_Practices.pdf) whitepaper\.
+ Systems Administrators should use Windows accounts with limited access to perform daily activities, and only elevate access when necessary to perform specific configuration changes\. Additionally, only access Windows instances directly when absolutely necessary\. Instead, leverage central configuration management systems such as EC2 Run Command, Systems Center Configuration Manager \(SCCM\), Windows PowerShell DSC, or Amazon EC2 Systems Manager \(SSM\) to push changes to Windows servers\.
+ Configure Amazon VPC subnet route tables with the minimal required network routes\. For example, place only Amazon EC2 instances that requite direct Internet access into subnets with routes to an Internet Gateway, and place only Amazon EC2 instances that need direct access to internal networks into subnets with routes to a virtual private gateway\.
+ Consider using additional security groups or ENIs to control and audit Amazon EC2 instance management traffic separately from regular application traffic\. This approach allows customers to implement special IAM policies for change control, making it easier to audit changes to security group rules or automated rule\-verification scripts\. Multiple ENIs also provide additional options for controlling network traffic including the ability to create host\-based routing policies or leverage different VPC subnet routing rules based on an ENI’s assigned subnet\.
+ Use AWS Virtual Private Network or AWS Direct Connect to establish private connections from your remote networks to your VPCs\. For more information, see [Network\-to\-Amazon VPC Connectivity Options](https://docs.aws.amazon.com/whitepapers/latest/aws-vpc-connectivity-options/network-to-amazon-vpc-connectivity-options.html)\.
+ Use [VPC Flow Logs](https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html) to monitor the traffic that reaches your instances\.
+ Use [AWS Security Hub](http://aws.amazon.com/security-hub/) to check for unintended network accessibility from your instances\.
+ Use [AWS Systems Manager Session Manager](https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html) to access your instances remotely instead of opening inbound RDP ports\.
+ Use [AWS Systems Manager Run Command](https://docs.aws.amazon.com/systems-manager/latest/userguide/execute-remote-commands.html) to automate common administrative tasks instead of opening inbound RDP ports\.
+ Many of the Windows OS roles and Microsoft business applications also provide enhanced functionality such as IP Address Range restrictions within IIS, TCP/IP filtering policies in Microsoft SQL Server, and connection filter policies in Microsoft Exchange\. Network restriction functionality within the application layer can provide additional layers of defense for critical business application servers\.

In addition to restricting network access to each Amazon EC2 instance, Amazon VPC supports implementing additional network security controls like in\-line gateways, proxy servers, and various network monitoring options\.

For more information, see the [AWS Security Best Practices](https://d1.awsstatic.com/whitepapers/Security/AWS_Security_Best_Practices.pdf) whitepaper\.